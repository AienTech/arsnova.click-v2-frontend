<!doctype html>
<html>
<head>
  <title>arsnova.click</title>
</head>
<body>
<p lang="en"
   style="display: none;">Your browser is unsupported!<br/>Please check which browser supports the required features (click on Details of every item) to use arsnova.click</p>
<p lang="de"
   style="display: none;">Dein Browser wird nicht unterstützt!<br/>Bitte prüfe, welcher Browser die erforderlichen Features unterstützt (klicke auf Details in jedem Element der Liste) um arsnova.click nutzen zu können</p>
<p lang="en"
   style="display: none;">Your browser is missing the following mandatory features:</p>
<p lang="de"
   style="display: none;">Dein Browser unterstützt nicht die folgenden erforderlichen Features:</p>
<ul id="list-required"></ul>

<p lang="en"
   style="display: none;">Additional it is missing the following optional features:</p>
<p lang="de"
   style="display: none;">Zusätzlich unterstützt er nicht die folgenden optionalen Features:</p>
<ul id="list-optional"></ul>

<script>
  var lang = navigator.language.split('-')[0];
  var textNodes = document.getElementsByTagName('p');
  for (var i = 0; i < textNodes.length; i++) {
    if (textNodes.item(i).getAttribute('lang') === lang) {
      textNodes.item(i).setAttribute('style', '');
    }
  }

  var fn = function () {
    var requiredListNode = document.getElementById('list-required');
    while (requiredListNode.firstChild) {
      requiredListNode.removeChild(requiredListNode.firstChild);
    }
    var optionalListNode = document.getElementById('list-optional');
    while (optionalListNode.firstChild) {
      optionalListNode.removeChild(optionalListNode.firstChild);
    }
    var list = [{label: 'Audio', value: Modernizr.audio, required: false, linkRef: '#feat=audio'},
        {label: 'BlobConstructor', value: Modernizr.blobconstructor, required: false, linkRef: '#feat=blobbuilder'},
        {label: 'IndexedDB', value: Modernizr.indexeddb, required: true, linkRef: '#feat=indexeddb'}, // TODO: Value resolves to a promise
        {label: 'ClassList', value: Modernizr.classlist, required: true, linkRef: '#feat=classlist'},
        {label: 'CORS', value: Modernizr.cors, required: true, linkRef: '#feat=cors'},
        {label: 'CSS-Calc', value: Modernizr.csscalc, required: true, linkRef: '#feat=calc'},
        {label: 'es5', value: Modernizr.es5, required: true, linkRef: '#feat=es5'},
        {label: 'FileInput', value: Modernizr.fileinput, required: false, linkRef: '#search=File%20Input'},
        {label: 'Flexbox', value: Modernizr.flexbox, required: true, linkRef: '#feat=flexbox'},
        {label: 'Flex-wrap', value: Modernizr.flexwrap, required: true, linkRef: '#feat=flexbox'},
        {label: 'Fullscreen', value: Modernizr.fullscreen, required: false, linkRef: '#feat=fullscreen'},
        {label: 'JSON', value: Modernizr.json, required: true, linkRef: '#feat=json'},
        {label: 'LocalStorage', value: Modernizr.localstorage, required: true, linkRef: '#feat=namevalue-storage'},
        {label: 'Promises', value: Modernizr.promises, required: true, linkRef: '#feat=promises'},
        {label: 'ServiceWorker', value: Modernizr.serviceworker, required: false, linkRef: '#feat=serviceworkers'},
        {label: 'SessionStorage', value: Modernizr.sessionstorage, required: true, linkRef: '#feat=namevalue-storage'},
        {label: 'SVG', value: Modernizr.svg, required: true, linkRef: '#feat=svg'},
        {label: 'Video', value: Modernizr.video, required: false, linkRef: '#feat=video'},
        {label: 'WebSockets', value: Modernizr.websockets, required: true, linkRef: '#feat=websockets'},
        {label: 'XHR-Response JSON', value: Modernizr.xhrresponsetypejson, required: true, linkRef: '#feat=xhr2'},
      ]
    ;

    list.forEach(function (elem) {
      if (elem.value) {
        return;
      }

      var node = document.createElement('li');
      node.innerHTML = elem.label + ' (<a target="_blank" href="https://caniuse.com/' + elem.linkRef + '">Details</a>)';
      node.className = 'failed';
      document.getElementById('list-' + (elem.required ? 'required' : 'optional')).appendChild(node);
    });
  };

  document.addEventListener('DOMContentLoaded', fn, false);
  window.addEventListener('load', fn, false);
  if ('attachEvent' in document) {
    document.attachEvent("onreadystatechange", fn);
  }
  if ('attachEvent' in window) {
    window.attachEvent("onload", fn);
  }
</script>

<script src="/assets/static/modernizr.js"></script>

</body>
</html>